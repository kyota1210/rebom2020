# README

## アプリケーション名
<h2>Rebom (Read Book Management)</h2> 

リボンと読みます。

## 概要
### Rebom「読書で人生を豊かにする」
本を読んで得た学びや気づきを記録していくアプリケーションを作成しました。<br>
<br>
200字以内で手軽にメモ感覚で書いて投稿することができ、自分だけの読書ノートを作れるアプリケーションです。<br>
他ユーザーの投稿も見ることができ、他人の視点で見る新たな価値にも出会えるきっかけを作ります。<br>
<br>
ちょっとした学びや体験をちょっとずつ記録していくことで、一冊の本を読み終えたときには、その本から抽出された自分だけの読書ノートが出来上がります。<br>
いつでも見返すことができ、本から学んだことや感じたことを体系的に振り返ることができるため、思考の整理や脳への定着度を高めることができます。<br>
また、自分はどんな文章や言葉から何を感じたのかといった、自分の思考を客観的に見ることができます。<br>


## URL
http://18.180.38.59:3000/

## テスト用アカウント
(フリー）<br>
メールアドレス　test@free.com<br>
パスワード　　　free123<br>
<br>
(出品者用)<br>
メールアドレス　test@sell.com<br>
パスワード　　　sell123<br>
<br>
(購入者用)<br>
メールアドレス　test@buy.com<br>
パスワード　　　buy123<br>

購入者カード情報
カード番号: 4242424242424242(16桁)<br>
有効期限: 3/30<br>
セキュリティコード: 123

## Basic認証のID/PASS
ID: kyoro<br>
PASS: 1210
<br>

## 利用方法
* WebブラウザGoogle Chromeの最新版を利用してアクセスしてください。<br>
(ただしデプロイ等で接続できないタイミングもございます。その際は少し時間をおいてから接続してください。)
* 接続先およびログイン情報については、上記の通りです。
* 同時に複数の方がログインしている場合に、ログインできない可能性があります。
* 本の追加方法<br>
ログイン→トップページから追加するボタン押下→本の情報入力→追加する
* 本についての投稿方法<br>
追加した本の画像をクリックする→アウトプットボタン押下→投稿内容を入力→保存する
* 本の検索方法<br>
ログイン→トップページ右上の検索窓にキーワードを入力→Enterまたは虫眼鏡アイコン押下
* 本の出品方法<br>
ログイン→書斎へ行くをクリックしてユーザーページへ遷移→未出品の本の売るボタン押下→本の情報入力→出品
* 本の購入の方法<br>
ログイン→トップページから出品中となっている本の中から選択→出品中ボタンを押下→購入者情報入力→購入
* 確認後、ログアウト処理をお願いします。


## 目指した課題解決
##### ペルソナ
* 生産年齢の中核となる20代~40代の男性・女性に設定。<br>
* 趣味・思考は、人生をより良くしていくために、本を読むことが重要と考えている人物に設定。
* 読書を瞬間的な疑似体験としてだけでなく、生活や仕事に活かせる永続的な学びとして活用したいと考えている人物に設定。
<br>

##### 課題
* 仕事や家事が忙しく、落ち着いて読書する時間が取りにくいという課題
* 読書を習慣化したいが、モチベーションが続かないという課題
* 本を読んでもすぐに内容を忘れてしまい、人生に活かすことができていないという課題
* 本を買うこと、もしくは読了が目的になってしまっているという課題
* 様々な本の中に点在する学びや気づきの内容が頭の中で整理できないという課題
<br>

##### 解決するためのRebomの機能
* 200文字以内でアウトプットすることを前提とし、章単位やセクション単位で少しづつ記録していくことができる投稿機能
* 他ユーザーの投稿を見ることができる機能
* 気になる本だけを集めることができる、お気に入り機能
* 本ごとに情報をまとめることができ、必要な箇所を読み終えたら出品できる機能

## 制作背景
「この言葉好きだな」「この考え方なんか良いな」「なるほど！」<br>
本を読んでいると、こういった学びや感情の動きがあります。しかし、本を読み終えたときにはほとんど忘れていて、そのときの瞬間的な経験で終わってしまっていることが多いということがよくありました。お金と時間を使って本を読み、良い学びがあったはずなのに、なんとなく次の本を読み始めるということを繰り返していました。<br>
<br>
読書はコスパ最強の自己投資とよく言われていますが、ただ買って読むだけで自己投資になっているでしょうか。<br>
「本を読み終えた後、学んだことや新たな発見をどう実生活と結びつけたらいいのかわからない」「思考を整理できてないまま放置している」といった、なんとなく状態が根本的な要因となり、読書を習慣的に行なうことや自己投資として活用することができていないという課題を抱えている人は多いと考えました。<br>
<br>
なんとなく本を読むよりも、思考しながら読む方がその本の価値は圧倒的に高まります。ただ、一冊の本を読み切るにはかなりエネルギーが必要ですし、読了が目的になってしまいがちです。また、読み終えた後ではかなり内容が抜け落ちていて、思考を整理しようとしても難しいと思います。<br>
そこで、少しづつ読み進めながら細かくアウトプットできるアプリケーションがあったら良いなと考えました。

<br>本を読んで得たことを元に、日々の生活や仕事に落とし込む具体的なアクションプランまで考えることをサポートするアプリケーションにしたいと思いました。

## 工夫したところ
#### ユーザー同士の繋がり度合い
最大のこだわりは、ユーザー同士の繋がりを活発にしすぎないという点です。Rebomは、本の紹介アプリではなく、あくまでも自分の人生を豊かにするために自分と向き合う時間のツールとして使ってもらいたいという想いがあるため、コメント機能やフォロー機能はあえて実装していません。他ユーザーからのコメントや誰にフォローされたなどといった、外部からのアクションに気を取られないようにしています。その代わり、お気に入り登録数を数値で見ることや、他ユーザーはどんなアウトプットをしているのかを見ることができるといった機能によって、控えめ且つポジティブな交流のみ生まれるようにしました。
<br>(ただ、本の売買機能についてはメッセージでのやり取りが必要になる場合もあると考えているため、今後検討していこうと思っています。）

#### シンプルで使いやすい見た目と機能
手軽にアウトプットすることを重視しているため、シンプルな見た目と機能で使いやすさを意識しました。具体的には、
* リンク上にカーソルを置くとポインターになるため、クリックする位置がわかりやすい
* ボタンの重要度によって配色や大きさ、カーソルを置いたときの変化をつけた点
* 読書の刺激にならないような落ち着いた配色を意識
* ユーザー情報編集においてパスワードの変更は頻度が低いため、必要な時だけ変更できるようにしている点

#### お気に入り登録
お気に入りをすることによって、相手にリアクションを送るだけでなく、自分だけのお気に入りリストが勝手に出来上がっていくようにしたことです。もちろん自分の追加した本にお気に入りすることもでき、お気に入りページにお気に入りした本だけを一覧表示できるようにしました。

#### エラーメッセージの表記
ユーザーの入力内容にミスがあった場合に、エラー内容をわかりやすく表示するようにしました。具体的には、エラーメッセージを日本語化したことと、バリデーションのオプションでエラーの内容ごとに詳細メッセージを設定したことです。バリデーションでは、細かく正規表現の指定がされているにも関わらず、エラーメッセージでは「不正な値です」と表示されるだけでした。これでは、「どこの」「何が」間違えて入力してしまっているのかがわかりにくかったため、ユーザーが入力エラーによって先に進めないストレスを感じることが考えられました。
そこで、バリデーションのオプションを使ってエラーの原因を細かく表示させることで、修正すべき点を明確にし、何度も入力内容を変更してフォーム送信で詰まるというストレスを軽減する実装ができました。


## 実装した機能についての説明
### Rebomのトップページです。
[![Image from Gyazo](https://i.gyazo.com/aafc6d70d554891d1b429beb6c41b00f.jpg)](https://gyazo.com/aafc6d70d554891d1b429beb6c41b00f)

### 本の追加機能
本の画像とタイトル、著者名を入力して追加します。タグ付けは任意となっています。<br>
本が正常に追加されると、トップページとマイページ(書斎)に追加されます。本の追加が、本の内容をアウトプットする前提となります。
[![Image from Gyazo](https://i.gyazo.com/dadeaf8777fa8edd6d5789cceb6767ba.gif)](https://gyazo.com/dadeaf8777fa8edd6d5789cceb6767ba)

### アウトプット投稿機能
本を追加すると本の詳細ページに遷移して、ちょっとしたアウトプットができるようになります。<br>
印象的なフレーズや好きな言葉をタイトル(ハイライト)にして、本文はつぶやき感覚で記述して保存します。
[![Image from Gyazo](https://i.gyazo.com/8d71fd8d897385a3c97b23dcf62b613c.gif)](https://gyazo.com/8d71fd8d897385a3c97b23dcf62b613c)

### お気に入り機能
お気に入りをすると、自分のお気に入りページに一覧で表示されるようになります。
[![Image from Gyazo](https://i.gyazo.com/9b73a1a15b67e3cafafcc716e6e9db58.gif)](https://gyazo.com/9b73a1a15b67e3cafafcc716e6e9db58)

### 本の出品機能
マイページ(書斎)に遷移すると、売るボタンがあり、それをクリックすると簡単に本を出品することができます。<br>
この機能によって、本を読んで得たことはアプリケーション上に記録した上で、本自体はすぐに売りに出すことができます。
[![Image from Gyazo](https://i.gyazo.com/64f46cc4cb39e700e800f6e22e2a9dc2.gif)](https://gyazo.com/64f46cc4cb39e700e800f6e22e2a9dc2)

### 本の購入機能
気になる本が出品されているとアプリケーション上で購入することができます。<br>
購入する際には個人情報の入力が必須になります。
[![Image from Gyazo](https://i.gyazo.com/7da1e99727ac479d1fcdb57f6180f7c0.gif)](https://gyazo.com/7da1e99727ac479d1fcdb57f6180f7c0)

## 実装予定の機能
* レスポンシブ対応
* 通知機能

スマホやタブレットに対応していないことで、手軽さには大きく欠けています。今後、レスポンシブ対応を実装していく必要があると考えています。<br>
また、より本を読む習慣作りをサポートしていくためにリマインド機能や気になる本に投稿があった際に通知されるような機能を実装していきたいと考えています。

## 開発環境

* 言語：HTML / CSS / Ruby(2.6.5) / JavaScript
* フレームワーク：Ruby on Rails(6.0.3.4)
* データベース：MySQL
* 運用環境： AWS(EC2, S3)
* その他：GitHub / Visual Studio Code


## 要件定義

| 実装機能             | 目的                | 詳細                        | ユースケース                                                     |
| ------------------ | ------------------- | -------------------------- | -------------------------------------------------------------- |
| ユーザー管理機能 | ユーザーを特定するため | ユーザー登録やログイン・ログアウトができるようにする | ・ユーザーは新規登録またはログインによってすべての機能を使うことができる |
| ユーザー詳細表示機能 | ユーザーの情報や投稿についてまとめて見ることができるようにするため | ユーザーのマイページを実装して、簡単なプロフィールや読書歴を見ることができるようにする | ・ユーザーにとってweb上の書斎となる<br>・読んできた本や気になっている本などの記録ができ、投稿した内容した内容を一覧で見ることができる |
| 本の追加機能 | 本を追加するため | ユーザーが本の情報を追加できるようにする | ・本タイトル、著者、画像、タグなど情報を入力して、投稿ボタンを押すと本の詳細表示画面に遷移する<br>・同時にトップページの一覧にも表示されている |
| 本の一覧表示機能 | 追加された本を一覧表示するため | 追加した本をタイムライン上に一覧表示する | ・ユーザーが追加した本の情報がタイムライン上に降順で表示される |
| 本の詳細表示機能 | 本の情報や具体的内容を見るため | 追加された本の情報やユーザーの投稿内容など詳細が表示されるようにする | ・ユーザーによって本の追加がされていることが前提<br>・その本について、投稿したユーザーや投稿しているテキストを見ることができる |
| 本の編集機能 | 追加した本の情報を編集するため | 追加した本の情報を編集できるようにする | ・ユーザーによって本の追加がされていることが前提<br>・編集ボタンを押すと、編集ページに遷移し、編集が完了すると本の詳細表示画面に戻る<br>・ログイン中かつその本を追加したユーザーのみに表示される |
| 本の削除機能 | 追加した本を削除するため | 追加した本の情報を削除できるようにする | ・ユーザーによって本の追加がされていることが前提<br>・削除ボタンを押すと、追加した本の情報が削除される<br>・ログイン中かつその本を追加したユーザーのみに表示される |
| テキストの投稿機能 | テキストを投稿するため | 追加した本単位でテキストを書いて投稿することができる。また、一冊の本に対して複数テキストの投稿ができる | ・ユーザーによって本の追加がされていることが前提<br>・投稿した本について、テキストを書くことができる<br>・テキストはハイライトという項目と文章を書く欄があり、どちらも埋めた上で保存ボタンを押すと、テキスト内容がデータベースに保存される |
| テキストの一覧表示機能 | テキストの投稿履歴を見やすくするため | 本の詳細表示画面にて、その本に関するテキストを降順で一覧表示する | ・ユーザーによって本の追加がされている、かつその本についてテキストが投稿されていることが前提<br>・本の詳細表示ページにテキスト一覧表示がされる<br>・任意のテキストを押すとそのテキストの詳細表示ページに遷移する |
| テキストの詳細表示機能 | 投稿したテキストの詳細を見るため | 本に関するテキスト内容の詳細画面に遷移して、テキスト詳細を見ることができる。また、ログイン中かつそのテキストの投稿者のみに削除ボタンと編集ボタンが表示されている。 | ・ユーザーによって本の追加がされている、かつその本についてテキストが投稿されていることが前提<br>・テキストの詳細を表示する |
| テキストの編集機能 | 投稿したテキストを編集するため | 投稿したテキスト内容を編集することができる | ・ユーザーによって本の追加がされている、かつその本についてテキストが投稿されていることが前提<br>・このテキストがログイン中かつ投稿したユーザーのみ、編集ボタンを押すと編集ページに遷移し、編集が完了するとテキストの詳細表示画面に戻る |
| テキストの削除機能 | 投稿したテキストを削除するため | 投稿したテキストを削除できるようにする | ・ユーザーによって本の追加がされている、かつその本についてテキストが投稿されていることが前提<br>・このテキストがログイン中かつ投稿したユーザーのみ、削除ボタンを押すとテキスト投稿が削除される |
| お気に入り登録機能 | 他ユーザーにリアクションを送ると同時に、お気に入りの本の情報を保存しておくため | お気に入り登録すると、非同期通信でお気に入り数がカウントされ、データが保存される | ・ユーザーによって本の追加がされていることが前提<br>・お気に入り登録ボタンを押すと、興味を持った本の投稿をお気に入り登録することができる<br>・投稿者本人も自分の投稿をお気に入り登録できる<br>・お気に入り登録した情報は専用ページに一覧表示される |
| お気に入り一覧表示機能 | お気に入り登録した本をまとめて表示して、見つけやすくするため | お気に入りページに遷移すると、お気に入り登録した本のみが一覧表示される | ・ユーザーによって本の追加がされていて、1つ以上お気に入り登録がされていることが前提<br>・ユーザーがお気に入り登録した本の情報が一覧表示されている |
| 本の検索機能 | ユーザーが簡単に本を検索して見つけやすくするため | 検索窓にキーワードを入力して検索するとキーワードを含む本を一覧で表示する | ・ユーザーによって本の追加がされていることが前提<br>・検索窓にキーワードを入れて検索ボタンを押すと、キーワードを含む本が一覧表示される |
| ハッシュタグ機能 | キーワードで関連する本を見つけやすくするため | 本を追加または編集する際にタグ付けすることができる。また、付与したタグは一意性を持って登録され、タグ履歴一覧が画面端に表示される。 | ・本を追加することが前提<br>・本追加の際、もしくは本情報の編集でタグ付けすることができる |
| 言語設定の日本語化 | エラーの原因をすぐに理解できるようにするため | ・フォーム入力に誤りがあると、エラーメッセージが日本語で表示される |
| 本の出品機能 | ユーザー任意で登録している本を出品できるようにするため | ・「売る」ボタンを押して本の情報を登録すると出品できる<br>・「売る」ボタンはユーザー詳細ページにおいて、ログイン中のユーザー本人のみに表示される<br>・本が出品されると、本一覧画面で出品中というマークが表示されるようになる | ・本を追加していることが前提<br>・「売る」というボタンを押して本の情報を登録すると出品できる<br>・出品はユーザーの任意で行なうことができる |
| 本の出品取り消し機能 | 本の出品を取り消すことができるようにするため | 出品状態になっている本に関して、出品を取り消す | ・本が出品されていることが前提<br>・出品取り消しをすると出品中というボタンが表示されなくなり、購入ページに遷移できないようなる |
| 本出品情報の編集機能 | 出品した本の情報を編集するため | 出品状態になっている本に関して、出品情報を編集する | ・本が出品されていることが前提<br>・ユーザー詳細ページで出品中ボタンを押すと、出品情報を編集できる |
| 本の購入機能 | 出品されている本を購入できるようにするため | 購入したい本の購入ページで購入者情報を入力し購入ボタンをクリックすると購入が完了する | ・本が出品されていることが前提<br>・購入ボタンをクリックすると、DB及びPAY.JPサイトに購入した本情報が更新される。購入済みの本は、出品中の表示が消えて購入ページに遷移できないようになる |

<br>

## DB設計

### users

| Column   | Type   | Options     |
| -------- | ------ | ----------- |
| name     | string | null: false |
| email    | string | null: false |
| password | string | null: false |
| text     | string |             |

#### Association
- has_many :books
- has_many :favorites
- has_many :favorite_books, through: :favorites, source: :book
- has_many :lists
- has_namy :orders
- has_one_attached :image 

### books

| Column | Type       | Options                        |
| ------ | ---------- | ------------------------------ |
| title  | string     | null: false                    |
| author | text       | null: false                    |
| user   | references | null: false, foreign_key: true |
| sell   | boolean    | null: false, default: false    |

#### Association
- belongs_to :user
- has_many   :posts
- has_many   :favorites
- has_many   :favorite_books, through: :favorites
- has_many   :book_tag_relations
- has_many   :tags, through: :book_tag_relations  
- has_one    :sale
- has_one_attached :image

### posts

| Column    | Type       | Options                        |
| --------- | ---------- | ------------------------------ |
| highlight | string     | null: false                    |
| text      | string     | null: false                    |
| book      | references | null: false, foreign_key: true |

#### Association
- belongs_to :book

### tags

| Column | Type   | Options                       |
| ------ | ------ | ----------------------------- |
| name   | string | null: false, uniqueness: true |

#### Association
- has_many :book_tag_relations
- has_many :books, through: :book_tag_relations

### Book_tag_relations

| Column | Type       | Options           |
| ------ | ---------- | ----------------- |
| book   | references | foreign_key: true |
| tag    | references | foreign_key: true |

#### Association
- belongs_to :book
- belongs_to :tag

### favorites

| Column | Type       | Options                        |
| ------ | ---------- | ------------------------------ |
| user   | references | null: false, foreign_key: true |
| book   | references | null: false, foreign_key: true |

#### Association
- belongs_to :user
- belongs_to :book

### lists

| Column | Type       | Options                        |
| ------ | ---------- | ------------------------------ |
| text   | string     | null: false                    |
| user   | references | null: false, foreign_key: true |

#### Association
- belongs_to :user

### Sales

| Column     | Type       | Options                        |
| ---------- | ---------- | ------------------------------ |
| status_id  | integer    | null: false                    |
| tranfer_id | integer    | null: false                    |
| price      | integer    | null: false                    |
| book       | references | null: false, foreign_key: true |

#### Association
- belongs_to :book
- has_one :order

### Orders

| Column    | Type       | Options                        |
| --------- | ---------- | ------------------------------ |
| user      | references | null: false, foreign_key: true |
| sale      | references | null: false, foreign_key: true |

#### Association
- belongs_to :user
- belongs_to :sale
- has_one :address

### Addresses

| Column        | Type       | Options                        |
| ------------- | ---------- | ------------------------------ |
| zip_code      | string     | null: false                    |
| prefecture_id | integer    | null: false                    |
| city          | string     | null: false                    |
| street        | string     | null: false                    |
| building      | string     |                                |
| phone_number  | string     | null: false                    |
| order         | references | null: false, foreign_key: true |

#### Association
- belongs_to :order


### ER図
[![Image from Gyazo](https://i.gyazo.com/51120eedcfe1490ff92c375ac3dc4fd0.png)](https://gyazo.com/51120eedcfe1490ff92c375ac3dc4fd0)
